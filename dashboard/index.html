<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MLBPredicts Dashboard</title>
    <style>
      :root { color-scheme: dark; font-family: Inter, Arial, sans-serif; }
      body { margin: 0; background: #0f1218; color: #e8edf7; }
      .container { max-width: 1260px; margin: 0 auto; padding: 16px; }
      .nav, .filters, .grid { display: grid; gap: 8px; }
      .nav { grid-template-columns: repeat(5, minmax(0, 1fr)); margin-bottom: 12px; }
      .filters { grid-template-columns: repeat(4, minmax(0, 1fr)); margin-bottom: 12px; }
      .grid { grid-template-columns: repeat(4, minmax(0, 1fr)); margin-bottom: 12px; }
      .card { background: #141a24; border: 1px solid #2f3643; border-radius: 8px; padding: 10px; }
      input, select, button { background: #171c25; color: #e8edf7; border: 1px solid #2f3643; padding: 8px; border-radius: 6px; }
      button { cursor: pointer; }
      button.active { border-color: #4c7eff; background: #1b2742; }
      table { width: 100%; border-collapse: collapse; }
      th, td { border-bottom: 1px solid #2f3643; padding: 10px; vertical-align: top; }
      .muted { color: #9ca6ba; font-size: 12px; }
      .msg { background: #12311e; border: 1px solid #2f7a4e; padding: 8px; border-radius: 6px; }
      .warn { background: #342911; border: 1px solid #8a6c26; padding: 8px; border-radius: 6px; }
      .hidden { display: none; }
      .tag { display:inline-block; border:1px solid #34405b; border-radius: 999px; padding: 2px 8px; margin:2px; font-size:12px; }
      .bar-wrap { background: #111722; border-radius: 4px; height: 8px; overflow: hidden; margin: 4px 0 8px; }
      .bar { background: linear-gradient(90deg, #4c7eff, #50c6ff); height: 100%; }
      .loading { text-align: center; padding: 40px; color: #9ca6ba; }
      .demo-banner { background: #1b2742; border: 1px solid #4c7eff; padding: 8px 12px; border-radius: 6px; margin-bottom: 12px; font-size: 13px; }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>MLBPredicts Dashboard</h1>
      <div id="demoBanner" class="demo-banner hidden">Demo mode – connect Supabase to see live data</div>
      <div class="nav">
        <button class="tab active" data-tab="explorer">Market Explorer</button>
        <button class="tab" data-tab="performance">Performance</button>
        <button class="tab" data-tab="health">Model Health</button>
        <button class="tab" data-tab="clv">CLV / Line Movement</button>
        <button class="tab" data-tab="bankroll">Bankroll / Bet Log</button>
      </div>

      <div id="alertsPanel" class="warn">Alerts: lineup posted · edge crossed threshold · odds moved</div>

      <section id="explorer" class="page">
        <div class="filters">
          <input id="date" type="date" />
          <select id="market"></select>
          <select id="signal"><option>ALL</option><option>BET</option><option>LEAN</option><option>FADE</option></select>
          <select id="book"><option>ALL</option></select>
          <select id="confidence"><option>ALL</option><option>HIGH</option><option>MEDIUM</option><option>LOW</option></select>
          <label>Min Edge % <input id="edge" type="number" min="0" max="100" value="0" /></label>
          <label><input id="lineup" type="checkbox" /> Lineup confirmed only</label>
          <label><input id="showAdvanced" type="checkbox" checked /> Show advanced metrics</label>
        </div>
        <p id="message" class="msg hidden"></p>
        <div id="exposureWarnings" class="warn hidden"></div>
        <div id="explorerLoading" class="loading hidden">Loading picks...</div>
        <table>
          <thead><tr><th>Pick</th><th>Market</th><th>Odds</th><th>Model</th><th>Implied</th><th>Edge</th><th>Signal</th><th>Flags</th><th></th></tr></thead>
          <tbody id="rows"></tbody>
        </table>
      </section>

      <section id="performance" class="page hidden">
        <div class="grid" id="perfCards"></div>
        <h3>Signal Breakdown</h3>
        <table><thead><tr><th>Signal</th><th>Bets</th><th>Win %</th><th>ROI</th></tr></thead><tbody id="signalRows"></tbody></table>
        <h3>Score Bucket Results</h3>
        <table><thead><tr><th>Bucket</th><th>Bets</th><th>ROI</th></tr></thead><tbody id="bucketRows"></tbody></table>
      </section>

      <section id="health" class="page hidden">
        <div class="grid" id="healthCards"></div>
        <h3>Calibration</h3>
        <table><thead><tr><th>Pred Bucket</th><th>Expected</th><th>Actual</th></tr></thead><tbody id="calRows"></tbody></table>
        <h3>Factor Diagnostics</h3>
        <div id="factorDiag"></div>
      </section>

      <section id="clv" class="page hidden">
        <div class="grid" id="clvCards"></div>
        <h3>CLV by Market/Book</h3>
        <table><thead><tr><th>Market</th><th>Book</th><th>Avg CLV</th><th>Bets</th></tr></thead><tbody id="clvRows"></tbody></table>
      </section>

      <section id="bankroll" class="page hidden">
        <div class="grid" id="bankrollCards"></div>
        <table><thead><tr><th>Date</th><th>Market</th><th>Pick</th><th>Odds</th><th>Units</th><th>Result</th><th>Profit</th></tr></thead><tbody id="betRows"></tbody></table>
      </section>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
